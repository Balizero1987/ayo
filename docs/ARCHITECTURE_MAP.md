# NUZANTARA - Mappa Architetturale Ufficiale
## Versione 5.2.0

---

## 1. ARCHITETTURA AD ALTO LIVELLO

```
                                    NUZANTARA PLATFORM v5.2.0
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                                      â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘
â•‘   â”‚                         ğŸŒ CLIENT LAYER                                      â”‚   â•‘
â•‘   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â•‘
â•‘   â”‚  â”‚   Next.js 16    â”‚  â”‚   WebSocket     â”‚  â”‚    Mobile Apps (Future)     â”‚  â”‚   â•‘
â•‘   â”‚  â”‚   React 19      â”‚  â”‚   SSE Client    â”‚  â”‚    API Consumers            â”‚  â”‚   â•‘
â•‘   â”‚  â”‚   (apps/mouth)  â”‚  â”‚                 â”‚  â”‚                             â”‚  â”‚   â•‘
â•‘   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘
â•‘               â”‚                    â”‚                        â”‚                        â•‘
â•‘               â–¼                    â–¼                        â–¼                        â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘
â•‘   â”‚                         ğŸ” API GATEWAY LAYER                                 â”‚   â•‘
â•‘   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â•‘
â•‘   â”‚  â”‚ Auth          â”‚  â”‚ Rate Limiting  â”‚  â”‚ Error Monitoring              â”‚  â”‚   â•‘
â•‘   â”‚  â”‚ Middleware    â”‚â”€â”€â”‚ Middleware     â”‚â”€â”€â”‚ Middleware                    â”‚  â”‚   â•‘
â•‘   â”‚  â”‚ (JWT/Session) â”‚  â”‚ (Redis-based)  â”‚  â”‚ (Sentry Integration)          â”‚  â”‚   â•‘
â•‘   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘
â•‘                                       â”‚                                              â•‘
â•‘                                       â–¼                                              â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘
â•‘   â”‚                     ğŸš€ FASTAPI APPLICATION (28 Routers)                      â”‚   â•‘
â•‘   â”‚                                                                              â”‚   â•‘
â•‘   â”‚   CORE APIS          CRM APIS           INTELLIGENCE       INTEGRATIONS      â”‚   â•‘
â•‘   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚   â•‘
â•‘   â”‚  â”‚ oracle   â”‚      â”‚ crm_      â”‚      â”‚ intel     â”‚      â”‚ whatsapp  â”‚      â”‚   â•‘
â•‘   â”‚  â”‚ _univers â”‚      â”‚ clients   â”‚      â”‚           â”‚      â”‚           â”‚      â”‚   â•‘
â•‘   â”‚  â”‚ al       â”‚      â”‚           â”‚      â”‚ agents    â”‚      â”‚ instagram â”‚      â”‚   â•‘
â•‘   â”‚  â”‚          â”‚      â”‚ crm_      â”‚      â”‚           â”‚      â”‚           â”‚      â”‚   â•‘
â•‘   â”‚  â”‚ conversa â”‚      â”‚ interact  â”‚      â”‚ agentic   â”‚      â”‚ notifica  â”‚      â”‚   â•‘
â•‘   â”‚  â”‚ tions    â”‚      â”‚ ions      â”‚      â”‚ _rag      â”‚      â”‚ tions     â”‚      â”‚   â•‘
â•‘   â”‚  â”‚          â”‚      â”‚           â”‚      â”‚           â”‚      â”‚           â”‚      â”‚   â•‘
â•‘   â”‚  â”‚ auth     â”‚      â”‚ crm_      â”‚      â”‚ autonomou â”‚      â”‚ image_    â”‚      â”‚   â•‘
â•‘   â”‚  â”‚          â”‚      â”‚ practices â”‚      â”‚ s_agents  â”‚      â”‚ generati  â”‚      â”‚   â•‘
â•‘   â”‚  â”‚ health   â”‚      â”‚           â”‚      â”‚           â”‚      â”‚ on        â”‚      â”‚   â•‘
â•‘   â”‚  â”‚          â”‚      â”‚ crm_      â”‚      â”‚ memory_   â”‚      â”‚           â”‚      â”‚   â•‘
â•‘   â”‚  â”‚ websock  â”‚      â”‚ shared_   â”‚      â”‚ vector    â”‚      â”‚ team_     â”‚      â”‚   â•‘
â•‘   â”‚  â”‚ et       â”‚      â”‚ memory    â”‚      â”‚           â”‚      â”‚ activity  â”‚      â”‚   â•‘
â•‘   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚   â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘
â•‘                                       â”‚                                              â•‘
â•‘                                       â–¼                                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## 2. LAYER DEI SERVIZI (70+ Servizi)

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                              ğŸ§  SERVICE LAYER                                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                                      â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â•‘
â•‘  â”‚                        ROUTING & CLASSIFICATION                                  â”‚ â•‘
â•‘  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â•‘
â•‘  â”‚  â”‚ QueryRouter     â”‚â”€â”€â”€â–¶â”‚ IntentClassifierâ”‚â”€â”€â”€â–¶â”‚ GoldenRouterService         â”‚  â”‚ â•‘
â•‘  â”‚  â”‚ (29KB)          â”‚    â”‚ (14KB)          â”‚    â”‚ (Multi-Oracle Routing)      â”‚  â”‚ â•‘
â•‘  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â•‘
â•‘                                        â”‚                                             â•‘
â•‘                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â•‘
â•‘                    â–¼                   â–¼                   â–¼                        â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â•‘
â•‘  â”‚   RAG & SEARCH     â”‚  â”‚   MEMORY & CRM     â”‚  â”‚   SYNTHESIS & RESPONSE         â”‚ â•‘
â•‘  â”‚                    â”‚  â”‚                    â”‚  â”‚                                â”‚ â•‘
â•‘  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â•‘
â•‘  â”‚ â”‚ SearchService  â”‚ â”‚  â”‚ â”‚ MemoryService  â”‚ â”‚  â”‚ â”‚ CrossOracleSynthesis     â”‚  â”‚ â•‘
â•‘  â”‚ â”‚                â”‚ â”‚  â”‚ â”‚ Postgres (23K) â”‚ â”‚  â”‚ â”‚                          â”‚  â”‚ â•‘
â•‘  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚ â•‘
â•‘  â”‚ â”‚ VisionRAG      â”‚ â”‚  â”‚ â”‚ AutoCRM        â”‚ â”‚  â”‚ â”‚ ClarificationService     â”‚  â”‚ â•‘
â•‘  â”‚ â”‚ Service        â”‚ â”‚  â”‚ â”‚ Service        â”‚ â”‚  â”‚ â”‚                          â”‚  â”‚ â•‘
â•‘  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚ â•‘
â•‘  â”‚ â”‚ AgenticRAG     â”‚ â”‚  â”‚ â”‚ ClientJourney  â”‚ â”‚  â”‚ â”‚ FollowupService          â”‚  â”‚ â•‘
â•‘  â”‚ â”‚ Service        â”‚ â”‚  â”‚ â”‚ Orchestrator   â”‚ â”‚  â”‚ â”‚                          â”‚  â”‚ â•‘
â•‘  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â”‚ (24KB)         â”‚ â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚ â•‘
â•‘  â”‚                    â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â”‚ ResponseValidator        â”‚  â”‚ â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â•‘
â•‘                                                                                      â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â•‘
â•‘  â”‚   TEAM & ANALYTICS â”‚  â”‚   NOTIFICATIONS    â”‚  â”‚   INGESTION & KNOWLEDGE        â”‚ â•‘
â•‘  â”‚                    â”‚  â”‚                    â”‚  â”‚                                â”‚ â•‘
â•‘  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â•‘
â•‘  â”‚ â”‚ TeamAnalytics  â”‚ â”‚  â”‚ â”‚ NotificationHubâ”‚ â”‚  â”‚ â”‚ IngestionService         â”‚  â”‚ â•‘
â•‘  â”‚ â”‚ Service (28KB) â”‚ â”‚  â”‚ â”‚ (27KB)         â”‚ â”‚  â”‚ â”‚                          â”‚  â”‚ â•‘
â•‘  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚ â•‘
â•‘  â”‚ â”‚ TeamTimesheet  â”‚ â”‚  â”‚ â”‚ Email (SendGr) â”‚ â”‚  â”‚ â”‚ LegalIngestionService    â”‚  â”‚ â•‘
â•‘  â”‚ â”‚ Service (17KB) â”‚ â”‚  â”‚ â”‚ SMS (Twilio)   â”‚ â”‚  â”‚ â”‚                          â”‚  â”‚ â•‘
â•‘  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚ â”‚ WhatsApp       â”‚ â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚ â•‘
â•‘  â”‚ â”‚ Cultural       â”‚ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â”‚ KnowledgeGraphBuilder    â”‚  â”‚ â•‘
â•‘  â”‚ â”‚ InsightsServiceâ”‚ â”‚  â”‚                    â”‚  â”‚ â”‚ (18KB)                   â”‚  â”‚ â•‘
â•‘  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚                    â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â•‘
â•‘                                                                                      â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â•‘
â•‘  â”‚   AGENTIC AI       â”‚  â”‚   TOOLS & EXEC     â”‚  â”‚   BUSINESS LOGIC               â”‚ â•‘
â•‘  â”‚                    â”‚  â”‚                    â”‚  â”‚                                â”‚ â•‘
â•‘  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â•‘
â•‘  â”‚ â”‚ Autonomous     â”‚ â”‚  â”‚ â”‚ ToolExecutor   â”‚ â”‚  â”‚ â”‚ DynamicPricingService    â”‚  â”‚ â•‘
â•‘  â”‚ â”‚ Research (18K) â”‚ â”‚  â”‚ â”‚                â”‚ â”‚  â”‚ â”‚                          â”‚  â”‚ â•‘
â•‘  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚ â•‘
â•‘  â”‚ â”‚ AgenticContext â”‚ â”‚  â”‚ â”‚ ZantaraTools   â”‚ â”‚  â”‚ â”‚ PricingService           â”‚  â”‚ â•‘
â•‘  â”‚ â”‚ Orchestrator   â”‚ â”‚  â”‚ â”‚                â”‚ â”‚  â”‚ â”‚                          â”‚  â”‚ â•‘
â•‘  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚ â•‘
â•‘  â”‚                    â”‚  â”‚                    â”‚  â”‚ â”‚ PerformanceOptimizer     â”‚  â”‚ â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â•‘
â•‘                                                                                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## 3. LAYER LLM & AI PROVIDERS

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                              ğŸ¤– LLM & AI LAYER                                       â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                                      â•‘
â•‘                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â•‘
â•‘                         â”‚      ZantaraAIClient           â”‚                           â•‘
â•‘                         â”‚   (Unified LLM Interface)      â”‚                           â•‘
â•‘                         â”‚    /backend/llm/               â”‚                           â•‘
â•‘                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â•‘
â•‘                                         â”‚                                            â•‘
â•‘        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â•‘
â•‘        â”‚                                â”‚                                â”‚          â•‘
â•‘        â–¼                                â–¼                                â–¼          â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â•‘
â•‘  â”‚   OpenAI      â”‚              â”‚   Anthropic   â”‚              â”‚   Google      â”‚    â•‘
â•‘  â”‚   Adapter     â”‚              â”‚   Adapter     â”‚              â”‚   Gemini      â”‚    â•‘
â•‘  â”‚               â”‚              â”‚               â”‚              â”‚   Adapter     â”‚    â•‘
â•‘  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚              â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚              â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â•‘
â•‘  â”‚ â”‚ GPT-4o    â”‚ â”‚              â”‚ â”‚ Claude 3  â”‚ â”‚              â”‚ â”‚ Gemini    â”‚ â”‚    â•‘
â•‘  â”‚ â”‚ GPT-4     â”‚ â”‚              â”‚ â”‚ Claude    â”‚ â”‚              â”‚ â”‚ Pro       â”‚ â”‚    â•‘
â•‘  â”‚ â”‚ Embedding â”‚ â”‚              â”‚ â”‚ Haiku     â”‚ â”‚              â”‚ â”‚ Gemini    â”‚ â”‚    â•‘
â•‘  â”‚ â”‚ Models    â”‚ â”‚              â”‚ â”‚ Sonnet    â”‚ â”‚              â”‚ â”‚ Ultra     â”‚ â”‚    â•‘
â•‘  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚              â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚              â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â•‘
â•‘                                                                                      â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â•‘
â•‘  â”‚                         SUPPORTO LLM                                             â”‚ â•‘
â•‘  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â•‘
â•‘  â”‚  â”‚ PromptManager   â”‚  â”‚ TokenEstimator  â”‚  â”‚ Sentence Transformers            â”‚  â”‚ â•‘
â•‘  â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚ (Local Embeddings)               â”‚  â”‚ â•‘
â•‘  â”‚  â”‚ Template        â”‚  â”‚ Cost            â”‚  â”‚ all-MiniLM-L6-v2                 â”‚  â”‚ â•‘
â•‘  â”‚  â”‚ Management      â”‚  â”‚ Optimization    â”‚  â”‚ paraphrase-multilingual          â”‚  â”‚ â•‘
â•‘  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â•‘
â•‘                                                                                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## 4. LAYER DATI & PERSISTENZA

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                              ğŸ’¾ DATA LAYER                                           â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                                      â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â•‘
â•‘  â”‚        ğŸ˜ POSTGRESQL               â”‚  â”‚           ğŸ”´ REDIS                     â”‚ â•‘
â•‘  â”‚                                    â”‚  â”‚                                        â”‚ â•‘
â•‘  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â•‘
â•‘  â”‚  â”‚ TABELLE PRINCIPALI           â”‚  â”‚  â”‚  â”‚ FUNZIONI                       â”‚   â”‚ â•‘
â•‘  â”‚  â”‚                              â”‚  â”‚  â”‚  â”‚                                â”‚   â”‚ â•‘
â•‘  â”‚  â”‚ â€¢ conversations              â”‚  â”‚  â”‚  â”‚ â€¢ Session Cache                â”‚   â”‚ â•‘
â•‘  â”‚  â”‚ â€¢ messages                   â”‚  â”‚  â”‚  â”‚ â€¢ Rate Limiting Counters       â”‚   â”‚ â•‘
â•‘  â”‚  â”‚ â€¢ users                      â”‚  â”‚  â”‚  â”‚ â€¢ Pub/Sub (Real-time)          â”‚   â”‚ â•‘
â•‘  â”‚  â”‚ â€¢ team_members               â”‚  â”‚  â”‚  â”‚ â€¢ Semantic Cache (LRU)         â”‚   â”‚ â•‘
â•‘  â”‚  â”‚ â€¢ crm_clients                â”‚  â”‚  â”‚  â”‚ â€¢ WebSocket Broadcast          â”‚   â”‚ â•‘
â•‘  â”‚  â”‚ â€¢ crm_interactions           â”‚  â”‚  â”‚  â”‚                                â”‚   â”‚ â•‘
â•‘  â”‚  â”‚ â€¢ crm_practices              â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â•‘
â•‘  â”‚  â”‚ â€¢ shared_memory              â”‚  â”‚  â”‚                                        â”‚ â•‘
â•‘  â”‚  â”‚ â€¢ knowledge_graph            â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â•‘
â•‘  â”‚  â”‚ â€¢ team_activity              â”‚  â”‚                                             â•‘
â•‘  â”‚  â”‚ â€¢ notifications              â”‚  â”‚                                             â•‘
â•‘  â”‚  â”‚                              â”‚  â”‚                                             â•‘
â•‘  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                                             â•‘
â•‘  â”‚                                    â”‚                                             â•‘
â•‘  â”‚  ğŸ“ Migrations: 15+ SQL files      â”‚                                             â•‘
â•‘  â”‚  ğŸ“ /backend/db/migrations/        â”‚                                             â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                             â•‘
â•‘                                                                                      â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â•‘
â•‘  â”‚                          ğŸ”· QDRANT VECTOR DATABASE                                â”‚â•‘
â•‘  â”‚                                                                                   â”‚â•‘
â•‘  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚â•‘
â•‘  â”‚   â”‚ visa_oracle     â”‚ â”‚ kbli_unified    â”‚ â”‚ tax_genius      â”‚ â”‚ legal_unified â”‚  â”‚â•‘
â•‘  â”‚   â”‚ 1,612 docs      â”‚ â”‚ 8,886 docs      â”‚ â”‚ 895 docs        â”‚ â”‚ 5,041 docs    â”‚  â”‚â•‘
â•‘  â”‚   â”‚                 â”‚ â”‚                 â”‚ â”‚                 â”‚ â”‚               â”‚  â”‚â•‘
â•‘  â”‚   â”‚ Visa/Immi-      â”‚ â”‚ Business        â”‚ â”‚ Tax             â”‚ â”‚ Legal         â”‚  â”‚â•‘
â•‘  â”‚   â”‚ gration Info    â”‚ â”‚ Codes           â”‚ â”‚ Regulations     â”‚ â”‚ Documents     â”‚  â”‚â•‘
â•‘  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚â•‘
â•‘  â”‚                                                                                   â”‚â•‘
â•‘  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚â•‘
â•‘  â”‚   â”‚ knowledge_base  â”‚ â”‚ bali_zero_team  â”‚ â”‚ bali_zero_      â”‚ â”‚ property_     â”‚  â”‚â•‘
â•‘  â”‚   â”‚ 8,923 docs      â”‚ â”‚ 43 docs         â”‚ â”‚ pricing         â”‚ â”‚ unified       â”‚  â”‚â•‘
â•‘  â”‚   â”‚                 â”‚ â”‚                 â”‚ â”‚ 29 docs         â”‚ â”‚ 29 docs       â”‚  â”‚â•‘
â•‘  â”‚   â”‚ General KB      â”‚ â”‚ Team Info       â”‚ â”‚ Pricing Data    â”‚ â”‚ Properties    â”‚  â”‚â•‘
â•‘  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚â•‘
â•‘  â”‚                                                                                   â”‚â•‘
â•‘  â”‚   ğŸ“Š TOTALE: 25,458+ documenti vettoriali | 1536-dim OpenAI embeddings           â”‚â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â•‘
â•‘                                                                                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## 5. FLUSSO ORACLE UNIVERSALE

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                     ğŸ”® ORACLE UNIVERSAL FLOW                                         â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                                      â•‘
â•‘    USER INPUT                                                                        â•‘
â•‘        â”‚                                                                             â•‘
â•‘        â–¼                                                                             â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•‘
â•‘  â”‚  1ï¸âƒ£  INTENT CLASSIFICATION                                                    â”‚  â•‘
â•‘  â”‚      IntentClassifier analyzes query â†’ determines intent category             â”‚  â•‘
â•‘  â”‚      Categories: legal, visa, tax, business, general, team, pricing          â”‚  â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•‘
â•‘        â”‚                                                                             â•‘
â•‘        â–¼                                                                             â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•‘
â•‘  â”‚  2ï¸âƒ£  QUERY ROUTING                                                            â”‚  â•‘
â•‘  â”‚      QueryRouter â†’ GoldenRouter â†’ Select appropriate oracles                  â”‚  â•‘
â•‘  â”‚                                                                                â”‚  â•‘
â•‘  â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚  â•‘
â•‘  â”‚      â”‚  VISA    â”‚  LEGAL   â”‚   TAX    â”‚   KBLI   â”‚  TEAM    â”‚                â”‚  â•‘
â•‘  â”‚      â”‚  Oracle  â”‚  Oracle  â”‚  Oracle  â”‚  Oracle  â”‚  Oracle  â”‚                â”‚  â•‘
â•‘  â”‚      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                â”‚  â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•‘
â•‘              â”‚          â”‚          â”‚          â”‚          â”‚                          â•‘
â•‘              â–¼          â–¼          â–¼          â–¼          â–¼                          â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•‘
â•‘  â”‚  3ï¸âƒ£  VECTOR SEARCH (Qdrant)                                                   â”‚  â•‘
â•‘  â”‚      SearchService â†’ Embed query â†’ Find similar documents                     â”‚  â•‘
â•‘  â”‚      Hybrid search: Dense (semantic) + Sparse (keyword)                       â”‚  â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•‘
â•‘        â”‚                                                                             â•‘
â•‘        â–¼                                                                             â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•‘
â•‘  â”‚  4ï¸âƒ£  MEMORY ENRICHMENT                                                        â”‚  â•‘
â•‘  â”‚      MemoryServicePostgres â†’ Retrieve conversation context                    â”‚  â•‘
â•‘  â”‚      CollectiveMemoryWorkflow â†’ Add shared team knowledge                     â”‚  â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•‘
â•‘        â”‚                                                                             â•‘
â•‘        â–¼                                                                             â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•‘
â•‘  â”‚  5ï¸âƒ£  CROSS-ORACLE SYNTHESIS                                                   â”‚  â•‘
â•‘  â”‚      Combine responses from multiple oracles                                  â”‚  â•‘
â•‘  â”‚      CrossOracleSynthesis â†’ Merge, deduplicate, prioritize                    â”‚  â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•‘
â•‘        â”‚                                                                             â•‘
â•‘        â–¼                                                                             â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•‘
â•‘  â”‚  6ï¸âƒ£  RESPONSE GENERATION                                                      â”‚  â•‘
â•‘  â”‚      ZantaraAIClient â†’ Generate final response                                â”‚  â•‘
â•‘  â”‚      ResponseValidator â†’ Validate quality & accuracy                          â”‚  â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•‘
â•‘        â”‚                                                                             â•‘
â•‘        â–¼                                                                             â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•‘
â•‘  â”‚  7ï¸âƒ£  FOLLOW-UP & CLARIFICATION                                                â”‚  â•‘
â•‘  â”‚      FollowupService â†’ Generate clarifying questions                          â”‚  â•‘
â•‘  â”‚      ClarificationService â†’ Handle ambiguous queries                          â”‚  â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•‘
â•‘        â”‚                                                                             â•‘
â•‘        â–¼                                                                             â•‘
â•‘    STREAMING RESPONSE (WebSocket/SSE)                                               â•‘
â•‘                                                                                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## 6. STRUTTURA DIRECTORY COMPLETA

```
nuzantara/
â”‚
â”œâ”€â”€ ğŸ“ apps/
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ backend-rag/                    # ğŸ PYTHON BACKEND (214 files)
â”‚   â”‚   â”œâ”€â”€ ğŸ“ backend/
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ app/                    # FastAPI Application Core
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ auth/               # ğŸ” Authentication
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ routers/            # ğŸš€ 28 API Routers
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ modules/            # ğŸ“¦ Core Modules (Identity, Knowledge, CRM)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ services/           # âš™ï¸ Application Services
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ core/               # ğŸ¯ Config, Constants
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ middleware/         # ğŸ”— 3 Middleware
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ decorators/         # ğŸ¨ Custom Decorators
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ utils/              # ğŸ› ï¸ Utilities
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ agents/                 # ğŸ¤– Agentic AI
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ agents/             # Agent Implementations
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ services/           # Agent Services
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ services/               # ğŸ’¼ Business Services (70+)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ classification/     # ğŸ“Š Intent Classification
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ context/            # ğŸ§  Context Orchestration
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ multimodal/         # ğŸ–¼ï¸ Vision/PDF Processing
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ rag/                # ğŸ” RAG Services
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ response/           # âœ… Response Validation
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ tools/              # ğŸ”§ Tool Execution
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ llm/                    # ğŸ¤– LLM Integration
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ adapters/           # Provider Adapters
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ zantara_ai_client.py
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ prompt_manager.py
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ db/                     # ğŸ’¾ Database
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ migrations/         # 15+ SQL Migrations
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ migrate.py
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ migration_manager.py
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ core/                   # ğŸ“š Core Business Logic
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ legal/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ plugins/
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ kb/                     # ğŸ“– Knowledge Base
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ plugins/                # ğŸ”Œ Plugin System
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ prompts/                # ğŸ“ Prompt Templates
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ utils/                  # ğŸ› ï¸ Shared Utilities
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ middleware/             # ğŸ”— Additional Middleware
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“ tests/                      # ğŸ§ª 196 Test Files
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ unit/
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ integration/
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ api/
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ performance/
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ requirements.txt            # 109 Dependencies
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ pyproject.toml              # Tool Config
â”‚   â”‚   â””â”€â”€ ğŸ“„ Dockerfile                  # Multi-stage Build
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ mouth/                          # âš›ï¸ NEXT.JS FRONTEND (42 files)
â”‚   â”‚   â”œâ”€â”€ ğŸ“ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ app/                    # Next.js 16 App Router
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ login/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ chat/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ admin/
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ components/             # React Components
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ chat/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ ui/
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ hooks/                  # Custom Hooks
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ lib/                    # Libraries
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ types/                  # TypeScript Types
â”‚   â”‚   â”œâ”€â”€ ğŸ“ e2e/                        # ğŸ­ Playwright E2E Tests
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ package.json
â”‚   â”‚   â””â”€â”€ ğŸ“„ Dockerfile
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ bali-intel-scraper/             # ğŸ•·ï¸ Web Scraper
â”‚   â”œâ”€â”€ ğŸ“ scraper/                        # ğŸ“° Legal Scraper
â”‚   â”œâ”€â”€ ğŸ“ core/                           # ğŸ”§ Core Utilities (Scribe, Sentinel)
â”‚   â””â”€â”€ ğŸ“ evaluator/                      # ğŸ“Š Quality Evaluator
â”‚
â”œâ”€â”€ ğŸ“ config/                             # âš™ï¸ Global Configs
â”‚   â”œâ”€â”€ ğŸ“ prometheus/
â”‚   â””â”€â”€ ğŸ“ alertmanager/
â”‚
â”œâ”€â”€ ğŸ“ scripts/                            # ğŸ“œ Automation Scripts
â”œâ”€â”€ ğŸ“ docs/                               # ğŸ“š Documentation
â”œâ”€â”€ ğŸ“ deploy/                             # ğŸš€ Deployment Config
â”‚
â”œâ”€â”€ ğŸ“„ package.json                        # Monorepo Config
â”œâ”€â”€ ğŸ“„ docker-compose.yml                  # Local Dev Services
â”œâ”€â”€ ğŸ“„ docker-compose.monitoring.yml       # Monitoring Stack
â”œâ”€â”€ ğŸ“„ .env.example                        # 170 Environment Variables
â””â”€â”€ ğŸ“„ .pre-commit-config.yaml             # Pre-commit Hooks
```

---

## 7. MAPPATURA AREE DI LAVORO UFFICIALE

### ğŸ¯ AREA A: ORACLE & ROUTING
**Focus**: Query processing, intent classification, multi-oracle routing
```
Location: /apps/backend-rag/backend/services/
Key Files:
â”œâ”€â”€ query_router.py (29KB) - Main query routing logic
â”œâ”€â”€ intent_classifier.py (14KB) - Intent classification
â”œâ”€â”€ golden_router.py - Multi-oracle selection
â””â”€â”€ cross_oracle_synthesis.py - Response merging

Related Routers:
â”œâ”€â”€ routers/oracle_universal.py (34KB)
â””â”€â”€ routers/agentic_rag.py
```
**Owner**: AI Engineering Team
**Priority**: P0 - Critical Path

---

### ğŸ¯ AREA B: RAG & SEARCH
**Focus**: Vector search, semantic retrieval, document processing
```
Location: /apps/backend-rag/backend/services/rag/
Key Files:
â”œâ”€â”€ search_service.py - Core search functionality
â”œâ”€â”€ vision_rag_service.py - Vision/PDF RAG
â”œâ”€â”€ agentic_rag_service.py - Agentic RAG
â”œâ”€â”€ reranker_service.py - Result reranking
â””â”€â”€ semantic_cache.py - Query caching

Vector Collections (Qdrant):
â”œâ”€â”€ visa_oracle (1,612 docs)
â”œâ”€â”€ kbli_unified (8,886 docs)
â”œâ”€â”€ tax_genius (895 docs)
â”œâ”€â”€ legal_unified (5,041 docs)
â”œâ”€â”€ knowledge_base (8,923 docs)
â”œâ”€â”€ bali_zero_team (43 docs)
â”œâ”€â”€ bali_zero_pricing (29 docs)
â””â”€â”€ property_unified (29 docs)
```
**Owner**: Search/ML Team
**Priority**: P0 - Critical Path

---

### ğŸ¯ AREA C: MEMORY & CRM
**Focus**: Conversation memory, client management, journey tracking
```
Location: /apps/backend-rag/backend/services/
Key Files:
â”œâ”€â”€ memory_service_postgres.py (23KB)
â”œâ”€â”€ auto_crm_service.py
â”œâ”€â”€ client_journey_orchestrator.py (24KB)
â””â”€â”€ collective_memory_workflow.py (11KB)

Routers:
â”œâ”€â”€ routers/crm_clients.py
â”œâ”€â”€ routers/crm_interactions.py
â”œâ”€â”€ routers/crm_practices.py
â””â”€â”€ routers/crm_shared_memory.py

Database Tables:
â”œâ”€â”€ crm_clients
â”œâ”€â”€ crm_interactions
â”œâ”€â”€ crm_practices
â”œâ”€â”€ shared_memory
â””â”€â”€ conversations
```
**Owner**: CRM Team
**Priority**: P1 - High

---

### ğŸ¯ AREA D: LLM & AI PROVIDERS
**Focus**: LLM integration, prompt management, token optimization
```
Location: /apps/backend-rag/backend/llm/
Key Files:
â”œâ”€â”€ zantara_ai_client.py - Unified LLM interface
â”œâ”€â”€ prompt_manager.py - Template management
â”œâ”€â”€ token_estimator.py - Cost optimization
â””â”€â”€ adapters/
    â”œâ”€â”€ openai_adapter.py
    â”œâ”€â”€ anthropic_adapter.py
    â””â”€â”€ google_adapter.py

Configuration:
â””â”€â”€ app/core/config.py (19KB) - All LLM settings
```
**Owner**: AI Platform Team
**Priority**: P0 - Critical Path

---

### ğŸ¯ AREA E: AGENTIC AI
**Focus**: Autonomous agents, tool execution, multi-step reasoning
```
Location: /apps/backend-rag/backend/agents/
Key Files:
â”œâ”€â”€ agents/
â”‚   â””â”€â”€ [agent implementations]
â””â”€â”€ services/
    â”œâ”€â”€ autonomous_research_service.py (18KB)
    â””â”€â”€ agentic_context_orchestrator.py

Related Services:
â”œâ”€â”€ services/tools/tool_executor.py
â””â”€â”€ services/tools/zantara_tools.py

Routers:
â”œâ”€â”€ routers/agents.py (27KB)
â””â”€â”€ routers/autonomous_agents.py (13KB)
```
**Owner**: AI Research Team
**Priority**: P1 - High

---

### ğŸ¯ AREA F: TEAM & ANALYTICS
**Focus**: Team management, activity tracking, performance analytics
```
Location: /apps/backend-rag/backend/services/
Key Files:
â”œâ”€â”€ team_analytics_service.py (28KB)
â”œâ”€â”€ team_timesheet_service.py (17KB)
â”œâ”€â”€ cultural_insights_service.py
â””â”€â”€ emotional_attunement.py

Routers:
â”œâ”€â”€ routers/team_activity.py
â””â”€â”€ routers/team_analytics.py

Database Tables:
â”œâ”€â”€ team_members
â”œâ”€â”€ team_activity
â””â”€â”€ team_timesheet
```
**Owner**: Product Team
**Priority**: P2 - Medium

---

### ğŸ¯ AREA G: NOTIFICATIONS
**Focus**: Multi-channel notifications (Email, SMS, WhatsApp)
```
Location: /apps/backend-rag/backend/services/
Key Files:
â”œâ”€â”€ notification_hub.py (27KB) - Unified notification system
â”œâ”€â”€ email_service.py
â”œâ”€â”€ sms_service.py
â””â”€â”€ whatsapp_service.py

External Providers:
â”œâ”€â”€ SendGrid (Email)
â”œâ”€â”€ Twilio (SMS)
â””â”€â”€ Twilio (WhatsApp)

Routers:
â”œâ”€â”€ routers/notifications.py
â”œâ”€â”€ routers/whatsapp.py
â””â”€â”€ routers/instagram.py
```
**Owner**: Platform Team
**Priority**: P2 - Medium

---

### ğŸ¯ AREA H: INGESTION & KNOWLEDGE
**Focus**: Document ingestion, knowledge graph, web scraping
```
Location: /apps/backend-rag/backend/services/
Key Files:
â”œâ”€â”€ ingestion_service.py (7.8KB)
â”œâ”€â”€ legal_ingestion_service.py (10KB)
â”œâ”€â”€ knowledge_graph_builder.py (18KB)
â””â”€â”€ politics_ingestion.py

Scrapers:
â”œâ”€â”€ apps/bali-intel-scraper/
â””â”€â”€ apps/scraper/

Database:
â”œâ”€â”€ migrations/014_knowledge_graph_tables.sql
â””â”€â”€ kb/ (Knowledge Base files)
```
**Owner**: Data Engineering Team
**Priority**: P1 - High

---

### ğŸ¯ AREA I: FRONTEND (MOUTH)
**Focus**: User interface, chat experience, admin panels
```
Location: /apps/mouth/
Key Directories:
â”œâ”€â”€ src/app/ - Next.js 16 App Router
â”‚   â”œâ”€â”€ login/
â”‚   â”œâ”€â”€ chat/
â”‚   â””â”€â”€ admin/
â”œâ”€â”€ src/components/
â”‚   â”œâ”€â”€ chat/ - Chat components
â”‚   â””â”€â”€ ui/ - UI library (Radix UI)
â”œâ”€â”€ src/hooks/ - Custom React hooks
â””â”€â”€ src/lib/ - Utilities

Testing:
â”œâ”€â”€ src/test/ - Vitest unit tests
â””â”€â”€ e2e/ - Playwright E2E tests
```
**Owner**: Frontend Team
**Priority**: P1 - High

---

### ğŸ¯ AREA J: INFRASTRUCTURE & DEVOPS
**Focus**: Docker, CI/CD, monitoring, deployment
```
Location: Root + config/
Key Files:
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ docker-compose.monitoring.yml
â”œâ”€â”€ apps/backend-rag/Dockerfile
â”œâ”€â”€ apps/mouth/Dockerfile
â”œâ”€â”€ .github/workflows/ (11 workflows)
â”œâ”€â”€ config/prometheus/
â”œâ”€â”€ config/alertmanager/
â””â”€â”€ deploy/

Services:
â”œâ”€â”€ Qdrant (Vector DB)
â”œâ”€â”€ PostgreSQL (Relational)
â”œâ”€â”€ Redis (Cache)
â”œâ”€â”€ Prometheus (Metrics)
â”œâ”€â”€ Grafana (Dashboards)
â”œâ”€â”€ Jaeger (Tracing)
â””â”€â”€ SonarQube (Code Quality)
```
**Owner**: DevOps/SRE Team
**Priority**: P0 - Critical Path

---

### ğŸ¯ AREA K: AUTH & SECURITY
**Focus**: Authentication, authorization, security middleware
```
Location: /apps/backend-rag/backend/app/auth/
Key Files:
â”œâ”€â”€ auth/validation.py (3.9KB)
â”œâ”€â”€ middleware/hybrid_auth_middleware.py
â”œâ”€â”€ middleware/rate_limit_middleware.py
â””â”€â”€ routers/auth.py

Security Features:
â”œâ”€â”€ JWT Authentication
â”œâ”€â”€ Session Management
â”œâ”€â”€ API Key Support
â”œâ”€â”€ Rate Limiting (Redis)
â”œâ”€â”€ CORS Configuration
â””â”€â”€ Security Headers
```
**Owner**: Security Team
**Priority**: P0 - Critical Path

---

### ğŸ¯ AREA L: TESTING & QUALITY
**Focus**: Unit tests, integration tests, E2E tests, code quality
```
Location: Multiple
Backend Tests:
â”œâ”€â”€ apps/backend-rag/backend/tests/ (196 files)
â”‚   â”œâ”€â”€ unit/
â”‚   â”œâ”€â”€ integration/
â”‚   â”œâ”€â”€ api/
â”‚   â””â”€â”€ performance/

Frontend Tests:
â”œâ”€â”€ apps/mouth/src/test/
â””â”€â”€ apps/mouth/e2e/

Quality Tools:
â”œâ”€â”€ pytest, pytest-cov
â”œâ”€â”€ vitest, playwright
â”œâ”€â”€ black, ruff, mypy, pylint
â”œâ”€â”€ eslint, prettier
â”œâ”€â”€ SonarQube, CodeQL
â””â”€â”€ .pre-commit-config.yaml
```
**Owner**: QA Team
**Priority**: P1 - High

---

## 8. MATRICE DIPENDENZE INTER-AREA

```
         A    B    C    D    E    F    G    H    I    J    K    L
      Oracle RAG  CRM  LLM  Agent Team Notif Ingest Front Infra Auth Test
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 A  â”‚  -    â—â—â—  â—â—   â—â—â—  â—â—   â—‹    â—‹    â—    â—‹    â—‹    â—â—   â—â—  â”‚ Oracle
 B  â”‚  â—â—â—  -    â—â—   â—â—â—  â—â—   â—‹    â—‹    â—â—â—  â—‹    â—‹    â—    â—â—  â”‚ RAG
 C  â”‚  â—â—   â—â—   -    â—â—   â—    â—â—   â—â—   â—‹    â—â—â—  â—‹    â—â—   â—â—  â”‚ CRM
 D  â”‚  â—â—â—  â—â—â—  â—â—   -    â—â—â—  â—‹    â—‹    â—    â—‹    â—‹    â—    â—   â”‚ LLM
 E  â”‚  â—â—   â—â—   â—    â—â—â—  -    â—‹    â—‹    â—    â—‹    â—‹    â—    â—â—  â”‚ Agent
 F  â”‚  â—‹    â—‹    â—â—   â—‹    â—‹    -    â—    â—‹    â—â—   â—‹    â—    â—   â”‚ Team
 G  â”‚  â—‹    â—‹    â—â—   â—‹    â—‹    â—    -    â—‹    â—    â—‹    â—    â—   â”‚ Notif
 H  â”‚  â—    â—â—â—  â—‹    â—    â—    â—‹    â—‹    -    â—‹    â—‹    â—    â—   â”‚ Ingest
 I  â”‚  â—‹    â—‹    â—â—â—  â—‹    â—‹    â—â—   â—    â—‹    -    â—‹    â—â—â—  â—â—  â”‚ Front
 J  â”‚  â—‹    â—‹    â—‹    â—‹    â—‹    â—‹    â—‹    â—‹    â—‹    -    â—â—   â—â—â— â”‚ Infra
 K  â”‚  â—â—   â—    â—â—   â—    â—    â—    â—    â—    â—â—â—  â—â—   -    â—â—  â”‚ Auth
 L  â”‚  â—â—   â—â—   â—â—   â—    â—â—   â—    â—    â—    â—â—   â—â—â—  â—â—   -   â”‚ Test
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Legenda:
â—â—â— = Dipendenza forte (modifica richiede coordinamento)
â—â—  = Dipendenza media (possibile impatto)
â—   = Dipendenza debole (impatto limitato)
â—‹   = Nessuna dipendenza diretta
```

---

## 9. PRIORITÃ€ LAVORO PER AREA

| PrioritÃ  | Area | Descrizione | CriticitÃ  |
|----------|------|-------------|-----------|
| **P0** | A - Oracle & Routing | Core business logic | ğŸ”´ Critico |
| **P0** | B - RAG & Search | Core AI functionality | ğŸ”´ Critico |
| **P0** | D - LLM & AI Providers | AI infrastructure | ğŸ”´ Critico |
| **P0** | J - Infrastructure | Platform stability | ğŸ”´ Critico |
| **P0** | K - Auth & Security | Security compliance | ğŸ”´ Critico |
| **P1** | C - Memory & CRM | Customer experience | ğŸŸ  Alto |
| **P1** | E - Agentic AI | Advanced features | ğŸŸ  Alto |
| **P1** | H - Ingestion & Knowledge | Data freshness | ğŸŸ  Alto |
| **P1** | I - Frontend | User experience | ğŸŸ  Alto |
| **P1** | L - Testing & Quality | Code reliability | ğŸŸ  Alto |
| **P2** | F - Team & Analytics | Internal tools | ğŸŸ¡ Medio |
| **P2** | G - Notifications | Communication | ğŸŸ¡ Medio |

---

## 10. QUICK REFERENCE - FILE CHIAVE

### Top 10 File PiÃ¹ Critici (per dimensione e importanza)
| File | Size | Area | Descrizione |
|------|------|------|-------------|
| `oracle_universal.py` | 34KB | A | Main oracle endpoint |
| `query_router.py` | 29KB | A | Query routing logic |
| `team_analytics_service.py` | 28KB | F | Team analytics |
| `notification_hub.py` | 27KB | G | Unified notifications |
| `agents.py` | 27KB | E | Agent endpoints |
| `client_journey_orchestrator.py` | 24KB | C | Customer journey |
| `memory_service_postgres.py` | 23KB | C | Memory persistence |
| `config.py` | 19KB | J | Central configuration |
| `knowledge_graph_builder.py` | 18KB | H | Knowledge graph |
| `autonomous_research_service.py` | 18KB | E | Autonomous research |

---

*Documento generato automaticamente - Versione: 5.2.0 - Data: 2025-12-09*
